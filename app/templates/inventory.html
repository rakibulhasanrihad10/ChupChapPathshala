{% extends "base.html" %}

{% block title %}Inventory{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Inventory Management</h1>
    <a href="{{ url_for('main.add_book') }}" class="btn-add">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Add New Book
    </a>
</div>

<div class="table-container">
    <table class="table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Availability</th>
                <th>Category</th>
                <th>Location</th>
                <th>Price</th>
                <th>Total</th>
                <th>Available</th>
                <th>Borrowed</th>
                <th>Sold</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td style="font-weight: 500; color: #111827;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <img src="{{ book.image_url or 'https://placehold.co/40x60?text=No+Cover' }}" alt="Cover"
                            style="width: 40px; height: 60px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <span>{{ book.title }}</span>
                    </div>
                </td>
                <td>{{ book.author }}</td>
                <td>
                    <span
                        style="padding: 2px 8px; border-radius: 9999px; background: #EEF2FF; color: #4F46E5; font-size: 0.75rem; font-weight: 600;">
                        {{ book.item_type|title }}
                    </span>
                </td>
                <td>{{ book.category }}</td>
                <td>{{ book.location }}</td>
                <td>{{ "%.2f"|format(book.price) }}</td>
                <td>{{ book.stock_total }}</td>
                <td>
                    <span
                        style="color: {% if book.stock_available > 0 %}#059669{% else %}#DC2626{% endif %}; font-weight: 500;">
                        {{ book.stock_available }}
                    </span>
                </td>
                <td>{{ book.stock_borrowed }}</td>
                <td>{{ book.stock_sold }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="9" style="text-align: center; padding: 3rem; color: #6B7280;">
                    No books in inventory. <br>
                    <a href="{{ url_for('main.add_book') }}" style="color: var(--primary-color);">Add your first
                        book</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div style="margin-top: 2rem;">
    <a href="{{ url_for('main.index') }}"
        style="color: #6B7280; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.875rem;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back to Dashboard
    </a>
</div>
{% endblock %}