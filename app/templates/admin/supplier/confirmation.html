{% extends "base.html" %}

{% block title %}Order Confirmed{% endblock %}

{% block content %}
<div class="min-h-[85vh] flex items-center justify-center p-6 transition-colors duration-200" style="background-color: var(--bg-color);">
    <div class="rounded-2xl shadow-xl w-full max-w-5xl overflow-hidden border flex flex-col md:flex-row transition-colors duration-200" style="background-color: var(--card-bg); border-color: var(--border-color);">
        
        <!-- Left Side: Success & Actions -->
        <div class="w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center items-center text-center transition-colors duration-200" style="background-color: var(--card-bg);">
            <div class="w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 relative animate-bounce transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-green-600 dark:text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
            </div>
            
            <h1 class="text-3xl font-extrabold mb-2 transition-colors duration-200" style="color: var(--text-color);">Order Confirmed!</h1>
            <p class="mb-8 transition-colors duration-200" style="color: var(--text-muted);">
                Order <span class="font-mono font-medium px-2 py-1 rounded transition-colors duration-200" style="background-color: var(--pill-bg); color: var(--text-color);">#{{ order.id }}</span> for named <span class="font-bold transition-colors duration-200" style="color: var(--secondary-color);">{{ order.supplier.name }}</span> has been successfully placed.
            </p>

            <div class="w-full flex flex-wrap justify-center gap-3">
                <!-- Download Button -->
                <a href="{{ url_for('main.download_invoice', order_id=order.id) }}" 
                   class="flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-900 dark:bg-gray-700 dark:hover:bg-gray-600 text-white text-sm font-medium py-2 px-4 rounded-lg shadow transition-transform transform hover:-translate-y-0.5"
                   style="background-color: #1f2937 !important; color: white !important;">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    Download Invoice
                </a>
                
                <!-- WhatsApp Button -->
                <a href="https://wa.me/?text={{ whatsapp_text|urlencode }}" 
                   target="_blank"
                   class="flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white text-sm font-medium py-2 px-4 rounded-lg shadow transition-transform transform hover:-translate-y-0.5"
                   style="background-color: #22c55e !important; color: white !important;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/>
                    </svg>
                    Send on WhatsApp
                </a>
            </div>

            <div class="mt-8 pt-6 w-full border-t transition-colors duration-200" style="border-color: var(--border-color);">
                <a href="{{ url_for('main.supplier_review') }}" class="text-sm font-medium hover:text-gray-800 dark:hover:text-gray-200 transition-colors flex items-center justify-center gap-2" style="color: var(--text-muted);">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Back to Review List
                </a>
            </div>
        </div>

        <!-- Right Side: Invoice Preview -->
        <div class="w-full md:w-1/2 border-l flex flex-col transition-colors duration-200" style="background-color: var(--bg-color); border-color: var(--border-color);">
            <div class="px-4 py-2 border-b flex justify-between items-center transition-colors duration-200" style="background-color: var(--pill-bg); border-color: var(--border-color);">
                <span class="text-xs font-bold uppercase tracking-wide" style="color: var(--text-muted);">Invoice Preview</span>
                <div class="flex gap-1.5">
                    <div class="w-3 h-3 rounded-full bg-red-400"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                    <div class="w-3 h-3 rounded-full bg-green-400"></div>
                </div>
            </div>
            <div class="flex-grow p-4 overflow-hidden relative" style="height: 500px;">
                <iframe src="{{ url_for('main.preview_invoice', order_id=order.id) }}" 
                        class="w-full h-full rounded shadow-sm border bg-white"
                        style="border-color: var(--border-color);"
                        title="Invoice Preview">
                </iframe>
            </div>
        </div>
    </div>
</div>
{% endblock %}
